name: Getting started

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]
      


jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      
      - name: Run a bash script
        run: ./testScript.sh
        env:
          TEST_RESULT: ${{ success() && exitCode == 0 ? 'success' : 'failure' }}


  merge:
    needs: test
    runs-on: ubuntu-latest
    if: needs.test.outputs.TEST_RESULT == 'success'
    steps:
    - uses: actions/checkout@v2
    - run: |
        git fetch origin main
        git merge main
         
